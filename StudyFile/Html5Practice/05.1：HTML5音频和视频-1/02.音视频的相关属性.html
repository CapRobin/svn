<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>HTML5音视频的相关属性</title>
</head>
<body>
<h1 align="center">5.1.02：HTML5音视频相关属性示例</h1><br>

<table border="1" width="1000" align="center" style="text-align:center; border-color: cornflowerblue" cellspacing="0">
    <tbody>
    <tr>
        <th style="text-align:center; width: 520px">
            <span style="font-size: 25px">视频展示</span>
        </th>
        <th style="text-align:center;width: 480px;">
            <span style="font-size: 25px">相关属性</span>
        </th>
    </tr>
    <tr>
        <td rowspan="13" style="text-align:center;">
            <video id="videoId" width="520" height="260" controls="controls">
                <source src="../Resources/src/nsyghr.mp4" type="video/mp4">
                <source src="../Resources/src/nsyghr.ogg" type="video/ogg">
                抱歉！您的浏览器暂时不支持HTML5的video标签，请更新或更换浏览器再次尝试！
            </video>
        </td>
    </tr>
    <tr>
        <td style="text-align:left">
            <button style="width: 232px" onclick="getFirstBuffrange()" type="button">获取第一个缓存范围</button>
            <button style="width: 232px" onclick="getUrl()" type="button">返回当前音视频文件的URL</button>
        </td>
    </tr>
    <tr>
        <td style="text-align:left;">
            <button style="width: 232px" onclick="getTime()" type="button">获取当前音视频的播放位置</button>
            <button style="width: 232px" onclick="setTime()" type="button">设置视频的播放时间点</button>
        </td>
    </tr>
    <tr>
        <td style="text-align:left;">
            <button style="width: 232px" onclick="getDefaultPlayBackRate()" type="button">获取音视频默认播放速度(1.0)</button>
            <button style="width: 232px" onclick="setDefaultPlayBackRate()" type="button">设置音视频默认播放速度(0.5)</button>
        </td>
    </tr>
    <tr>
        <td style="text-align:left;">
            <button style="width: 232px" onclick="getDuration()" type="button">获取当前音视频的播放总时间</button>
            <button style="width: 232px" onclick="getIsPlayed()" type="button">已观看音视频的范围</button>
        </td>
    </tr>
    <tr>
        <td style="text-align:left;">
            <button style="width: 153px" onclick="setLoop()" type="button">设置循环播放</button>
            <button style="width: 154px" onclick="noLoop()" type="button"> 取消循环播放</button>
            <button style="width: 153px" onclick="isLoop()" type="button">是否循环播放</button>
        </td>
    </tr>
    <tr>
        <td style="text-align:left;">
            <button style="width: 153px" onclick="isMuted()" type="button">是否静音</button>
            <button style="width: 154px" onclick="setMuted()" type="button">设置静音</button>
            <button style="width: 153px" onclick="noMuted()" type="button">取消静音</button>
        </td>
    </tr>
    <tr>
        <td style="text-align:left;">
            <button style="width: 232px" onclick="getNetWorkState()" type="button">获取当前音视频加载的网络状态</button>
            <button style="width: 232px" onclick="isPaused()" type="button">是否暂停</button>
        </td>
    </tr>
    <tr>
        <td style="text-align:left;">
            <button style="width: 232px" onclick="getPlayBakcRate()" type="button">获取视频播放速度</button>
            <button style="width: 232px" onclick="setPlayBackRate()" type="button">减慢视频播放速度</button>
        </td>
    </tr>
    <tr>
        <td style="text-align:left;">
            <button style="width: 153px" onclick="isPreLoad()" type="button">预加载状态</button>
            <button style="width: 154px" onclick="setPreLoad()" type="button">设置预加载</button>
            <button style="width: 153px" onclick="noPreLoad()" type="button">取消预加载</button>
        </td>
    </tr>
    <tr>
        <td style="text-align:left;">
            <button style="width: 232px" onclick="getReadState()" type="button">媒体加载就绪状态</button>
            <button style="width: 232px" onclick="getSeekAble()" type="button">获取媒体第一次的寻址范围</button>
        </td>
    </tr>
    <tr>
        <td style="text-align:left;">
            <button style="width: 153px" onclick="getVolume()" type="button">获取音量</button>
            <button style="width: 154px" onclick="setVolume01()" type="button">音量变小</button>
            <button style="width: 153px" onclick="setVolume02()" type="button">音量变大</button>
        </td>
    </tr>
    </tbody>
</table>

<script>
    //得到Video的ID
    var myid = document.getElementById("videoId")

    /*buffered属性返回一个Timeranges对象，TimeRanges表示音视频文件当前所缓存的范围*/
    function getFirstBuffrange() {
        alert("开始于：" + myid.buffered.start(0) + ";" + "结束于：" + myid.buffered.end(0));
    }

    /*currentSrc属性放回当前音视频的一个URL地址，如果没有则返回空*/
    function getUrl() {
        alert("当前资源文件的URL地址为：" + myid.currentSrc)
    }

    /*currentTime属性返回当前音视频所播放的位置，返回为时间，单位为秒*/
    function getTime() {
        alert("音视频当前所播放的位置为：" + myid.currentTime + "秒");
    }

    /*CurrentTime来设置视频的播放时间点,该方法暂无法看到效果(原因待查)*/
    function setTime() {
        myid.currentTime = 50;
    }

    /*DefaultPlayBackRate属性用于获取或设置当前音视频文件的播放速度,音视频默认的播放速度为1*/
    function getDefaultPlayBackRate() {
        alert("当前视频的播放速度为：" + myid.defaultPlaybackRate);
    }

    /*设置音视频的播放速度*/
    function setDefaultPlayBackRate() {
        myid.defaultPlaybackRate = 0.5;
        myid.load();
    }

    /*duration属性得到当前音视频文件的播放总时间*/
    function getDuration() {
        alert("当前音视频播放的总时间为：" + myid.duration + "秒")
    }

    /*played属性表示用户已播放(已观看)音视频的范围，返回TimeRange对象为时间，单位为妙*/
    function getIsPlayed() {
        alert("您已从：" + myid.played.start(0) + "秒观看至" + myid.played.end(0) + "秒")
    }

    /*设置循环播放*/
    function setLoop() {
        myid.loop = true;
        myid.load();
    }

    /*取消循环播放*/
    function noLoop() {
        myid.loop = false;
        myid.load();
    }

    /*获取是否循环播放的状态*/
    function isLoop() {
        alert("当前音视频是否循环播放：" + myid.loop)
    }

    /*muted属性用于设置音视频是否静音的状态*/
    function isMuted() {
        alert("是否静音：" + myid.muted)
    }

    /*设置静音*/
    function setMuted() {
        myid.muted = true;
    }

    /*取消静音*/
    function noMuted() {
        myid.muted = false;
    }

    /*networkState属性用于返回音视频加载的网络状态(0.元素尚未做初始化;
    1.加载完成；
    2.正在加载中；
    3.加载失败(不支持的编码格式))
    */
    function getNetWorkState() {
        alert("当前网络状态为：" + myid.networkState)
    }

    /*paused属性用于设置或获取音视频是否暂停播放*/
    function isPaused() {
        alert("当前视频是否暂停播放：" + myid.paused)
    }

    /*playBackRate属性设置或返回音视频当前的播放速度*/
    function getPlayBakcRate() {
        alert("当前音视频的播放速度为：" + myid.playbackRate)
    }

    /*设置当前音视频的播放速度*/
    function setPlayBackRate() {
        myid.playbackRate = 0.5;
    }

    /*preload属性用于设置或返回是否在页面加载后立即加载音视频文件*/
    function isPreLoad() {
        alert("获取预加载状态为：" + myid.preload)
    }

    /*设置预加载*/
    function setPreLoad() {
        myid.preload = "auto";
    }

    /*取消预加载*/
    function noPreLoad() {
        myid.preload = "none"
    }

    /*readState 属性用于返回音视频文件当前加载就绪的状态值
    * 0.表示当前数据没有有效地媒体资源，即还未连接到服务器端
    * 1.表示媒体资源确认正在加载当中，已和服务端建立连接，但还未开始下载，无法播放
    * 2.表示已获取到了当前数据并开始下载，但没有下载到足够的数据可进行播放
    * 3.表示已下载到了足够媒体数据，已经可以开始播放了
    * 4.表示已下载到足够的可播放数据，完全可以进行播放，且浏览器的加载速度已经远远超过视频播放的加载速度
    * */
    function getReadState() {
        alert("当前加载媒体的就绪状态为：" + myid.readyState)
    }

    /*seekable 对象表示在加载网络音视频中用户可寻址的范围(可拖动缓存播放的位置，多线程下载中的某一段)*/
    function getSeekAble() {
        alert("媒体寻址范围的起始点为第" + myid.seekable.start(0) + "秒；末端位置为第" + myid.seekable.end(0) + "秒")
    }

    /*volume 属性用于设置或获取音量的大小*/
    function getVolume() {
        alert("当前媒体音量的大小为：" + myid.volume)
    }

    /*设置音量为0.2*/
    function setVolume01() {
        myid.volume = 0.2;
    }

    /*设置音量为1*/
    function setVolume02() {
        myid.volume = 1.0;
    }
</script>

</body>
</html>
