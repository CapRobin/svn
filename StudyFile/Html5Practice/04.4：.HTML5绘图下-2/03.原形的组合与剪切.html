<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>HTML5Canvas——圆形的组合与剪切</title>
    <!--设置Canvas画布的样式-->
    <style>
        body {
            margin: 0px;
            padding: 0px;
        }

        #mcvs {
            border: 1px solid #000000;
            background-color: #b3d4fc;
        }
    </style>
    <script type="text/javascript">
        function combinationType(mtitle, switchType) {
            document.forms["myform"]["titleText"].value = mtitle + switchType;
            var cvs = document.getElementById("mcvs");
            var ctt = cvs.getContext("2d");
            //每次清除画布
            ctt.clearRect(0, 0, cvs.width, cvs.height);
            /*绘制矩形(原始图形)*/
            ctt.beginPath();
            ctt.rect(200, 100, 150, 150);
            ctt.fillStyle = "#0000ff";
            ctt.fill();

            //ctt.globalCompositeOperation = "source-over";
            /*switch (parseInt(switchType))
            {

                case 0:
                    mType = "source-over";
                    break;
                case 1:
                    mType = "source-atop";
                    break;
                case 2:
                    mType = "source-in";
                    break;
                case 3:
                    mType = "source-out";
                    break;
                case 4:

                    break;
                case 5:

                    break;
                case 6:

                    break;
            }*/

            /*设置图片组合方式*/
            ctt.globalCompositeOperation = switchType;

            /*绘制圆(新图形)*/
            ctt.beginPath();
            ctt.arc(350, 250, 100, 0, 2 * Math.PI, false);
            ctt.fillStyle = "#ff0000"
            ctt.fill();

        }

        /*设置标题*/
        function title(context, textstyle, textColor, text, x, y) {
            context.font = textstyle;
            context.fillStyle = textColor;
            context.fillText(text, x, y)
        }

    </script>
</head>
<body>
<h1 align="center">4.4.03：Canvas——圆形的组合与剪切示例</h1><br><br>

<form action="#" method="get" name="myform">
    <h3 align="center">
        (请每次刷新后点击查看组合效果)
        <output name="titleText" style="color: #ff0000"/>
    </h3>
</form>
<p align="center">
    <!--
        "source-over"：     新图形绘制于已有图形的顶部。这是默认的行为。
        "source-atop"：     只有在新图形和已有内容重叠的地方，才绘制新图形。
        "source-in"	 ：     在新图形以及已有内容重叠的地方，新图形才绘制。所有其他内容成为透明。
        "source-out" ：     只有在和已有图形不重叠的地方，才绘制新图形。
        "destination-over"：新图形绘制于已有内容的后面。
        "destination-atop"：已有的内容只有在它和新的图形重叠的地方保留。新图形绘制于内容之后。
        "destination-in"：  在新图形以及已有画布重叠的地方，已有内容都保留。所有其他内容成为透明的。
        "destination-out"： 在已有内容和新图形不重叠的地方，已有内容保留。所有其他内容成为透明。
        "copy"：            只绘制新图形，删除其他所有内容。
        "lighter"：         在图形重叠的地方，颜色由两种颜色值的加值来决定。
        "darker"：          在图形重叠的地方，颜色由两个颜色值相减后决定。
        "xor"：             在重叠和正常绘制的其他地方，图形都成为透明的。
    -->
    <button onclick="combinationType('组合方式01：','source-over')">方式01</button>
    <button onclick="combinationType('组合方式02：','source-atop')">方式02</button>
    <button onclick="combinationType('组合方式03：','source-in')">方式03</button>
    <button onclick="combinationType('组合方式04：','source-out')">方式04</button>
    <button onclick="combinationType('组合方式05：','destination-over')">方式05</button>
    <button onclick="combinationType('组合方式06：','destination-atop')">方式06</button>
    <button onclick="combinationType('组合方式07：','destination-in')">方式07</button>
    <button onclick="combinationType('组合方式08：','destination-out')">方式08</button>
    <button onclick="combinationType('组合方式09：','lighter')">方式09</button>
    <button onclick="combinationType('组合方式10：','darker')">方式10</button>
    <button onclick="combinationType('组合方式11：','copy')">方式11</button>
    <button onclick="combinationType('组合方式12：','xor')">方式12</button>
    <br><br>
    <canvas id="mcvs" width="600" height="400">
        抱歉！您的浏览器暂不支持HTML5，请更新或更换浏览器后再次尝试，谢谢！
    </canvas>
</p>
</body>
</html>
